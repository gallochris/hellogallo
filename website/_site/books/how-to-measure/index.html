<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Clayton Christensen">

<title>Chris Gallo - How will you measure your life</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Chris Gallo</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">projects</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-theory-has-an-opinion" id="toc-the-theory-has-an-opinion" class="nav-link active" data-scroll-target="#the-theory-has-an-opinion">The Theory has an opinion</a></li>
  <li><a href="#motivation" id="toc-motivation" class="nav-link" data-scroll-target="#motivation">Motivation</a></li>
  <li><a href="#two-factor-theory" id="toc-two-factor-theory" class="nav-link" data-scroll-target="#two-factor-theory">Two-Factor Theory</a></li>
  <li><a href="#strategy" id="toc-strategy" class="nav-link" data-scroll-target="#strategy">Strategy</a></li>
  <li><a href="#discovery-driven-planning" id="toc-discovery-driven-planning" class="nav-link" data-scroll-target="#discovery-driven-planning">Discovery-driven planning</a></li>
  <li><a href="#resource-allocation" id="toc-resource-allocation" class="nav-link" data-scroll-target="#resource-allocation">Resource Allocation</a></li>
  <li><a href="#good-and-bad-capital" id="toc-good-and-bad-capital" class="nav-link" data-scroll-target="#good-and-bad-capital">Good and Bad Capital</a></li>
  <li><a href="#doing-the-job-right" id="toc-doing-the-job-right" class="nav-link" data-scroll-target="#doing-the-job-right">Doing the job right</a></li>
  <li><a href="#understand-the-job-of-the-customer" id="toc-understand-the-job-of-the-customer" class="nav-link" data-scroll-target="#understand-the-job-of-the-customer">Understand the job of the customer</a></li>
  <li><a href="#danger-of-outsourcing" id="toc-danger-of-outsourcing" class="nav-link" data-scroll-target="#danger-of-outsourcing">Danger of Outsourcing</a></li>
  <li><a href="#processes" id="toc-processes" class="nav-link" data-scroll-target="#processes">Processes</a></li>
  <li><a href="#priorities" id="toc-priorities" class="nav-link" data-scroll-target="#priorities">Priorities</a></li>
  <li><a href="#learning" id="toc-learning" class="nav-link" data-scroll-target="#learning">Learning</a></li>
  <li><a href="#right-stuff" id="toc-right-stuff" class="nav-link" data-scroll-target="#right-stuff">Right Stuff</a></li>
  <li><a href="#culture" id="toc-culture" class="nav-link" data-scroll-target="#culture">Culture</a></li>
  <li><a href="#full-vs.-marginal-thinking" id="toc-full-vs.-marginal-thinking" class="nav-link" data-scroll-target="#full-vs.-marginal-thinking">Full vs.&nbsp;Marginal Thinking</a></li>
  <li><a href="#purpose" id="toc-purpose" class="nav-link" data-scroll-target="#purpose">Purpose</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">How will you measure your life</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Clayton Christensen </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="the-theory-has-an-opinion" class="level3">
<h3 class="anchored" data-anchor-id="the-theory-has-an-opinion">The Theory has an opinion</h3>
<ul>
<li><p>Data is only available about the past</p></li>
<li><p>Difference in WHAT to think and HOW to think</p></li>
<li><p>A good theory provides if-then statements</p></li>
</ul>
</section>
<section id="motivation" class="level3">
<h3 class="anchored" data-anchor-id="motivation">Motivation</h3>
<ul>
<li><p>Incentive/principal agent theory (Jensen/Meckling)</p></li>
<li><p>If you want someone to do something just pay them for what you want them to do</p></li>
<li><p>Too many anomalies - military very motivated, non-profits, charities, etc.</p></li>
</ul>
</section>
<section id="two-factor-theory" class="level3">
<h3 class="anchored" data-anchor-id="two-factor-theory">Two-Factor Theory</h3>
<ul>
<li><p>Hygiene factors - status, compensation, job security, work conditions, company policies</p></li>
<li><p>Bad hygiene will equal dissatisfaction</p></li>
<li><p>Good hygiene equals absence of dissatisfaction</p></li>
<li><p>At best good hygiene factors make you stop hating it</p></li>
<li><p>Motivators - challenging work, recognition, responsibility and personal growth</p></li>
<li><p>Answer the following questions: more about building something than having something</p></li>
<li><p>Is this going to give me a chance to develop?</p></li>
<li><p>Will I learn new things?</p></li>
<li><p>Will I gain responsibility?</p></li>
</ul>
</section>
<section id="strategy" class="level3">
<h3 class="anchored" data-anchor-id="strategy">Strategy</h3>
<ul>
<li><p>2 sources for options of strategy (Mintzberg)</p></li>
<li><p>Anticipated opportunities - you can see and choose to pursue (deliberate strategy)</p></li>
<li><p>Unanticipated opportunities - cocktail of problems an opportunities that emerge while trying to implement (deliberate strategy)</p></li>
<li><p>Unanticipated fights anticipated for attention, capital, and hearts of management</p></li>
<li><p>Stick to plan, modify, or pivot - emergent strategy</p></li>
<li><p>Not discrete analytical event - it is a continuous, diverse, unruly process</p></li>
<li><p>Having a focused plan only makes sense in certain circumstances</p></li>
<li><p>If you’ve found an outlet that offers the requisite hygiene and motivators = deliberate</p></li>
<li><p>If not in above situation = emergent/ experiment</p></li>
<li><p>As you learn from each experience - adjust</p></li>
</ul>
</section>
<section id="discovery-driven-planning" class="level3">
<h3 class="anchored" data-anchor-id="discovery-driven-planning">Discovery-driven planning</h3>
<ul>
<li><p>What has to prove true for this to work? Assumptions embedded in numbers = fail</p></li>
<li><p>Rank assumptions in order by importance and uncertainty (top = most important, least certain = bottom)</p></li>
<li><p>Quickly, with little expense, test validity of most important assumptions and adjust</p></li>
</ul>
</section>
<section id="resource-allocation" class="level3">
<h3 class="anchored" data-anchor-id="resource-allocation">Resource Allocation</h3>
<ul>
<li><p>Grove - to understand a businesses strategy look at what they actually do rather than what they say they will do</p></li>
<li><p>Our resources - personal time, energy, talent and wealth</p></li>
<li><p>Difference in prioritizing for immediate returns - promotion, raise/bonus RATHER than long term gains - raising children</p></li>
<li><p>Strategy is created through hundreds of everyday decisions about how to spend your time, energy and money</p></li>
<li><p>Nothing but good intentions, unless it’s effectively implemented</p></li>
<li><p>If the decisions you make about where to invest your blood, sweat and tears are not consistent with the person you aspire to be, you’ll never become that person</p></li>
</ul>
</section>
<section id="good-and-bad-capital" class="level3">
<h3 class="anchored" data-anchor-id="good-and-bad-capital">Good and Bad Capital</h3>
<ul>
<li><p>93 percent of successful companies had to abandon their original strategy (Bhide)</p></li>
<li><p>Successful companies succeed because they have money left over after the original strategy fails, so they can pivot and try another approach (Do not spend all your money on original strategy = fail)</p></li>
<li><p>Capital that seeks growth before profits is bad</p></li>
<li><p>Impatient for growth and patient for profits</p></li>
<li><p>Honda succeeded because it was so financially constrained it was forced to be patient for growth while it figured out its profit model</p></li>
<li><p>Investments in relationships with friends and family need to be made long, long before you’ll see any sign that they are paying off</p></li>
</ul>
</section>
<section id="doing-the-job-right" class="level3">
<h3 class="anchored" data-anchor-id="doing-the-job-right">Doing the job right</h3>
<ul>
<li><p>What causes us to buy a product or service is that we actually hire products to do jobs for us</p></li>
<li><p>Company must understand the jobs that arise in people’s lives, then develop products and the accompanying experiences required in purchasing and using the product to do the job perfectly, it causes customers to instinctively pull the products into their lives when the problem arises</p></li>
</ul>
</section>
<section id="understand-the-job-of-the-customer" class="level3">
<h3 class="anchored" data-anchor-id="understand-the-job-of-the-customer">Understand the job of the customer</h3>
<ul>
<li><p>Jobs others are trying to do is very different from the jobs that you think he/ she should want to do</p></li>
<li><p>Our effort is often misplaced Work through job-to-be-done lens</p></li>
<li><p>Sacrifice deepens commitment</p></li>
</ul>
</section>
<section id="danger-of-outsourcing" class="level3">
<h3 class="anchored" data-anchor-id="danger-of-outsourcing">Danger of Outsourcing</h3>
<ul>
<li><p>Concept of capabilities - resources, processes and priorities</p></li>
<li><p>Dynamic and built overtime</p></li>
<li><p>Resources - most tangible, people, equipment, technology, designs, brands, information, cash, relationships with suppliers, distributors and customers</p></li>
<li><p>Resources can be hired/fired, bought/sold, depreciated/built</p></li>
<li><p>1 of 3 critical factors driving business</p></li>
</ul>
</section>
<section id="processes" class="level3">
<h3 class="anchored" data-anchor-id="processes">Processes</h3>
<ul>
<li><p>Way which employees interact, coordinate, communicate and make decisions are processes</p></li>
<li><p>Enable resources to solve more and more complicated problems</p></li>
<li><p>Includes ways products are developed/made, and methods by which market research, budgeting, employee development, compensation and resource allocation are developed</p></li>
<li><p>Can’t be seen on a balance sheet</p></li>
</ul>
</section>
<section id="priorities" class="level3">
<h3 class="anchored" data-anchor-id="priorities">Priorities</h3>
<ul>
<li><p>Defines how a company makes decisions, clear guidance about what a company will invest in or not</p></li>
<li><p>What will employees focus on today and what will they not</p></li>
<li><p>Company’s priorities must be in sync with how the company makes money</p></li>
<li><p>Dynamic view of suppliers capabilities - what are they striving to do</p></li>
<li><p>What capabilities must stay in house - otherwise you will hand over future of your business</p></li>
</ul>
</section>
<section id="learning" class="level3">
<h3 class="anchored" data-anchor-id="learning">Learning</h3>
<ul>
<li><p>People learn when they are ready to learn Not when we’re ready to teach them</p></li>
<li><p>Need to do more then learn new skills, need to be challenged</p></li>
<li><p>Need to develop values, solve hard problems</p></li>
<li><p>Hand over to others (outsource) you are losing opportunities to develop them</p></li>
</ul>
</section>
<section id="right-stuff" class="level3">
<h3 class="anchored" data-anchor-id="right-stuff">Right Stuff</h3>
<ul>
<li><p>Not born with superior skills, your the best because you honed them along the way</p></li>
<li><p>Experiences that taught them how to deal with setbacks or extreme stress in high- stakes situations</p></li>
<li><p>Abilities are developed and shaped by experiences in life</p></li>
<li><p>Wrestle with the problems you don’t even know you are going to face</p></li>
<li><p>Value of giving people experiences before they need them plays out in many fields other than business</p></li>
<li><p>If you do not fail along the way, they will not build the resilience to get through life</p></li>
<li><p>Experiences must prepare you down the line</p></li>
<li><p>Find the right experiences to help build skills you need to succeed</p></li>
</ul>
</section>
<section id="culture" class="level3">
<h3 class="anchored" data-anchor-id="culture">Culture</h3>
<ul>
<li><p>Schein - a way of working together toward common goals that have been followed so frequently and so successfully that people don’t even think about trying to do things another way. If a culture has formed, people will autonomously do what they need to do to be successful.</p></li>
<li><p>Casual Friday’s, free sodas in the cafeteria, or whether you can bring your dog into the office - just artifacts of culture, NOT real thing</p></li>
<li><p>Result of shared learning = first time when a problem or challenge arises</p></li>
<li><p>Example - How do we deal with customer complaint?</p></li>
<li><p>If the decision is deemed “good enough” employees return to same decision and way of solving the problem</p></li>
<li><p>Every time you solve a problem, you are learning what matters</p></li>
<li><p>Creating an understanding of priorites, how to execute (processes)</p></li>
<li><p>A culture is the unique combination of processes and priorities within an organization</p></li>
<li><p>Advantage allows an organization to become self-managing</p></li>
<li><p>If environment changes substantially, strength of the culture will make it hard to change things</p></li>
<li><p>Culture is formed through repetition - must reinforce, it will form one way or another</p></li>
</ul>
</section>
<section id="full-vs.-marginal-thinking" class="level3">
<h3 class="anchored" data-anchor-id="full-vs.-marginal-thinking">Full vs.&nbsp;Marginal Thinking</h3>
<ul>
<li><p>Life comes with no warning signs Case of Blockbuster vs.&nbsp;Netflix</p></li>
<li><p>Failure is the end path of marginal thinking</p></li>
<li><p>We end up paying the full cost of our decisions, not the marginal</p></li>
<li><p>Full cost of something completely new</p></li>
<li><p>Leverage what already exists</p></li>
<li><p>If you need a machine and don’t buy it, then you will ultimately find that you’ve paid for it and don’t have it</p></li>
<li><p>100 percent of the time is easier than 98 percent of the time</p></li>
<li><p>Instinct to use marginal costs hides us from the true cost of our actions</p></li>
<li><p>Decide what you stand for and then stand for it all the time</p></li>
</ul>
</section>
<section id="purpose" class="level3">
<h3 class="anchored" data-anchor-id="purpose">Purpose</h3>
<ul>
<li><p>likeness - what the managers/employees hope they build when they reach each critical milestone on their journey</p></li>
<li><p>commitment - conversion to likeness that they are trying to create, do not compromise</p></li>
<li><p>metrics - enable everyone associated to with enterprise to calibrate their work, keep them moving together in a coherent way</p></li>
<li><p>Likeness, commitment, metrics compromise a purpose</p></li>
<li><p>Must deliberately be perceived and chosen, then pursued</p></li>
<li><p>The Person I want to become Becoming Committed</p></li>
<li><p>Find the right metric</p></li>
<li><p>Resolve others challenges rather than your own, do not focus on your problems</p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>2024 | chris gallo | built using quarto</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/gallochris">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:chris@hellogallo.com">
      <i class="bi bi-mailbox" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>